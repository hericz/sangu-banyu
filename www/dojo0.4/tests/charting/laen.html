<html>
<head>
<script type="text/javascript" src="../../dojo.js"></script>

<script type="text/javascript">

//Include the required dojo libraries/namespaces
dojo.require("dojo.collections.Store");
dojo.require("dojo.charting.Chart");
dojo.require('dojo.json');


function fetchKW() {
	var exampleData = [];
	var obj ={};
	for (j=0; j<10; j++) {
		isi = (1000+j*10);
		obj = {no: j, nama:"blavla", nilai:isi, waktu:"0"};
		exampleData.push(obj);
	}
	document.getElementById('tahuIsi').innerHTML  = exampleData[0].nilai + " " + exampleData[1].nilai + " " + exampleData[2].nilai + " " + exampleData[3].nilai + " " + exampleData[4].nilai + " " + exampleData[5].nilai + "<br>";
	document.getElementById('tahuIsi').innerHTML += exampleData[0].no + " " + exampleData[1].no + " " + exampleData[2].no + " " + exampleData[3].no + " " + exampleData[4].no + " " + exampleData[5].no + " ";
	grafikKW(exampleData, 'lokasi', 5000, "", 1, 5, 5);
}

function grafikKW(dataChart, lokasi, hmax, labelY, periode, posX, posY) {
	var bwh = 0;

	var store = new dojo.collections.Store();
	store.setData(dataChart);

	var timeSeries = new dojo.charting.Series({
	dataSource: store,
	bindings: { x: "no", y: "nilai" },
	label: "Example Series"
	}); 


	//Define the x-axis
	var xAxis = new dojo.charting.Axis();

	//Set the upper and lower data range values
	xAxis.range = { lower: dataChart[0].no, upper: dataChart[dataChart.length-1].no };

	xAxis.origin = "max";
	xAxis.showTicks = true;
	xAxis.label = "Example chart";

	//Setup the x tick marks on the chart
	//*
	var lblX = {};	
	for (j=(dataChart.length); j>1; j--) {
		lbl = {label: j-1, value: (dataChart.length-j)};
		(xAxis.labels).push(lbl);	
	}
	lbl = {label: "now", value: (dataChart.length-1)};
	(xAxis.labels).push(lbl);
	//*/
	
	/*
	xAxis.labels = [
	{ label: 'First', value: 20 },
	{ label: 'Second', value: 31 },
	{ label: 'Third', value: 35 },
	{ label: 'Fourth', value: 50 },
	{ label: 'Fifth', value: 55 }
	];
	//*/
	
	//Define the y-axis
	var yAxis = new dojo.charting.Axis();
	yAxis.range = { lower: bwh, upper: hmax };
	yAxis.showLines = true;
	yAxis.showTicks = true;
	yAxis.label = "Time Taken";

	//Setup the y tick marks on the chart
	var grid = (hmax-bwh)/5;
	for(k=0; k<6; k++) {
		obj = {label: (k*grid+bwh).toString(), value: (k*grid)+bwh};
		(yAxis.labels).push(obj);
	}
	
	var chartPlot = new dojo.charting.Plot(xAxis, yAxis);

	chartPlot.addSeries({
		data: timeSeries, plotter: dojo.charting.Plotters.CurvedArea
	}); 

	var chartPlotArea = new dojo.charting.PlotArea();
	chartPlotArea.size = { width: 370, height: 170 };
	chartPlotArea.padding = { top: 20, right: 20, bottom: 30, left: 50 };

	//Add the plot to the area
	chartPlotArea.plots.push(chartPlot); 
	timeSeries.color = chartPlotArea.nextColor();	
	
	var chart = new dojo.charting.Chart(null, "Example chart", "This is the example chart description");

	//Add the plot area at an offset of 10 pixels from the top left
	chart.addPlotArea({ x: posX, y: posY, plotArea: chartPlotArea });

	chart.node = dojo.byId(lokasi);
	chart.render();

	store = null;
	timeSeries = null;
	xAxis = null;
	yAxis = null;
	chartPlot = null;
	chartPlotArea = null;
	chart = null;
}

function grafik(dataChart, lokasi, hmax, labelY, periode, posX, posY) {
	var obj;
	var bwh = 0;
	//var labelX = [];
	//for (i=0; i<(dataChart.length/2); i+=2) {
	//	labelX[i] = (periode + i*periode);
	//}
	
	var store = new dojo.collections.Store();
	store.setData(dataChart);

	var timeSeries = new dojo.charting.Series({
		dataSource: store, bindings: { x: "no", y: "nilai" }, label: "Example Series"
	}); 
	
	//Define the x-axis
	var xAxis = new dojo.charting.Axis();

	//Set the upper and lower data range values
	xAxis.range = { lower: dataChart[0].no, upper: dataChart[dataChart.length-1].no	 };

	xAxis.origin = "max";
	xAxis.showLines = true;
	xAxis.showTicks = true;
	xAxis.label = "waktu";

	//Setup the x tick marks on the chart
	/*
	xAxis.labels = [
		{ label: labelX[9], value: 0 },
		{ label: labelX[8], value: 1 },
		{ label: labelX[7], value: 2 },
		{ label: labelX[6], value: 3 },
		{ label: labelX[5], value: 4 },
		{ label: labelX[4], value: 5 },
		{ label: labelX[3], value: 6 },
		{ label: labelX[2], value: 7 },
		{ label: labelX[1], value: 8 },
		{ label: labelX[0], value: 9 },
		{ label: 'Now', value: 10 },
	];
	//*/
	var lblX = {};
	
	//for (j=0; j<(dataChart.length); j+=1) {
	//for (j=0; j<(arHistori.length); j++) {
	//	lbl = {label: (dataChart[j].no), value: dataChart[j].no};
	//	(xAxis.labels).push(lbl);	
	//}
	//lbl = {label: "now", value: (arHistori.length-1)};
	//(xAxis.labels).push(lbl);	
	
	//Define the y-axis
	var yAxis = new dojo.charting.Axis();
	yAxis.range = { lower: bwh, upper: hmax };
	yAxis.showLines = true;
	yAxis.showTicks = true;
	yAxis.label = labelY;

	//Setup the y tick marks on the chart
	/*
	yAxis.labels = [
		{ label: "0", value: 000 },
		{ label: "2000", value: 2000 },
		{ label: "4000", value: 4000 },
		{ label: "6000", value: 6000 },
		{ label: "8000", value: 8000 },
		{ label: "10000", value: 10000 }
	];
	//*/
	//var lblY = [];
	
	//var grid = (hmax-bwh)/5;
	//for(k=0; k<6; k++) {
	//	obj = {label: (k*grid+bwh).toString(), value: (k*grid)+bwh};
	//	(yAxis.labels).push(obj);
	//}
	//document.getElementById('tahuIsi').innerHTML += (yAxis.labels)[3].value + "<br>";
	
	var chartPlot = new dojo.charting.Plot(xAxis, yAxis);

	chartPlot.addSeries({
		data: timeSeries, plotter: dojo.charting.Plotters.CurvedArea
	}); 

	var chartPlotArea = new dojo.charting.PlotArea();
	chartPlotArea.size = { width: 470, height: 170 };
	chartPlotArea.padding = { top: 20, right: 20, bottom: 30, left: 50 };

	timeSeries.color = chartPlotArea.nextColor();

	//Add the plot to the area
	chartPlotArea.plots.push(chartPlot); 

	//var chart = new dojo.charting.Chart(null, "Example chart", "This is the example chart description");
	var chart = new dojo.charting.Chart(null, "Example chart", "This is the example chart description");
	
	//Add the plot area at an offset of 10 pixels from the top left
	chart.addPlotArea({ x: posX, y: posY, plotArea: chartPlotArea });	

	chart.node = dojo.byId(lokasi);
	chart.render();
	
	store = null;
	timeSeries = null;
	xAxis = null;
	yAxis = null;
	chartPlot = null;
	chartPlotArea = null;
	chart = null;
}

</script>
</head>
<body onload="fetchKW()">
	<h1><font COLOR="blue">mas beni ganteng deh</font></h1><br>
	<div id="tahuIsi"></div><br><br><br><br>
	<div id="GraphContainerArea"></div>
	
	<div id="lokasi"></div>
	
	
</html>
</body>